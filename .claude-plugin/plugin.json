{
  "name": "claude-code-mem",
  "displayName": "Claude Code Memory Plugin",
  "version": "0.1.0",
  "description": "基于 MCP (Model Context Protocol) 的 Claude Code 记忆插件，用于记录和管理系统对话内容",
  "author": "AI Assistant",
  "license": "MIT",
  "repository": "https://github.com/yourusername/claude-code-mem-plugin",
  "engines": {
    "python": ">=3.12",
    "node": ">=18.0.0"
  },
  "main": "server/mcp_server.py",
  "scripts": {
    "start": "uv run python server/main.py",
    "setup": "./scripts/setup.sh",
    "test": "uv run pytest"
  },
  "mcp": {
    "type": "http",
    "endpoint": "http://localhost:8000/mcp",
    "name": "Claude Code Memory Plugin",
    "description": "记录和管理 Claude Code 对话内容的记忆插件"
  },
  "tools": [
    {
      "name": "record_user_input",
      "description": "记录用户输入内容",
      "parameters": {
        "content": {
          "type": "string",
          "description": "用户输入的内容",
          "required": true
        },
        "conversation_id": {
          "type": "string",
          "description": "会话ID，如果不提供则创建一个新会话",
          "required": false
        }
      }
    },
    {
      "name": "record_assistant_response",
      "description": "记录助手响应内容",
      "parameters": {
        "content": {
          "type": "string",
          "description": "助手响应的内容",
          "required": true
        },
        "conversation_id": {
          "type": "string",
          "description": "会话ID",
          "required": false
        }
      }
    },
    {
      "name": "record_tool_execution",
      "description": "记录工具执行信息",
      "parameters": {
        "tool_name": {
          "type": "string",
          "description": "工具名称",
          "required": true
        },
        "tool_args": {
          "type": "object",
          "description": "工具参数",
          "required": true
        },
        "tool_result": {
          "type": "object",
          "description": "工具执行结果",
          "required": true
        },
        "message_id": {
          "type": "string",
          "description": "关联的消息ID",
          "required": true
        }
      }
    },
    {
      "name": "search_conversations",
      "description": "搜索对话会话",
      "parameters": {
        "query": {
          "type": "string",
          "description": "搜索关键词",
          "required": true
        },
        "limit": {
          "type": "integer",
          "description": "返回结果数量限制",
          "default": 10
        }
      }
    },
    {
      "name": "search_messages",
      "description": "搜索消息内容",
      "parameters": {
        "query": {
          "type": "string",
          "description": "搜索关键词",
          "required": true
        },
        "conversation_id": {
          "type": "string",
          "description": "指定会话ID进行搜索"
        },
        "role": {
          "type": "string",
          "description": "消息角色过滤",
          "enum": ["user", "assistant", "system", "tool"]
        },
        "limit": {
          "type": "integer",
          "description": "返回结果数量限制",
          "default": 20
        }
      }
    },
    {
      "name": "get_conversation_messages",
      "description": "获取会话的所有消息",
      "parameters": {
        "conversation_id": {
          "type": "string",
          "description": "会话ID",
          "required": true
        },
        "limit": {
          "type": "integer",
          "description": "返回消息数量限制",
          "default": 50
        }
      }
    },
    {
      "name": "generate_conversation_summary",
      "description": "生成会话总结",
      "parameters": {
        "conversation_id": {
          "type": "string",
          "description": "会话ID",
          "required": true
        }
      }
    },
    {
      "name": "get_conversation_stats",
      "description": "获取会话统计信息",
      "parameters": {
        "conversation_id": {
          "type": "string",
          "description": "会话ID",
          "required": true
        }
      }
    },
    {
      "name": "list_recent_conversations",
      "description": "列出最近的对话会话",
      "parameters": {
        "limit": {
          "type": "integer",
          "description": "返回会话数量限制",
          "default": 10
        }
      }
    },
    {
      "name": "get_memory_system_status",
      "description": "获取记忆系统的状态信息"
    }
  ],
  "hooks": {
    "onUserInput": {
      "description": "当用户输入时触发，自动记录用户输入",
      "script": "client/claude_code_hook.py",
      "function": "record_user_input"
    },
    "onAssistantResponse": {
      "description": "当助手响应时触发，自动记录助手响应",
      "script": "client/claude_code_hook.py",
      "function": "record_assistant_response"
    },
    "onToolExecution": {
      "description": "当工具执行时触发，自动记录工具执行信息",
      "script": "client/claude_code_hook.py",
      "function": "record_tool_execution"
    }
  },
  "configuration": {
    "server_url": {
      "type": "string",
      "default": "http://localhost:8000",
      "description": "记忆服务器的 URL 地址"
    },
    "auto_record": {
      "type": "boolean",
      "default": true,
      "description": "是否自动记录对话内容"
    },
    "cache_enabled": {
      "type": "boolean",
      "default": true,
      "description": "是否启用 Redis 缓存"
    }
  },
  "keywords": [
    "memory",
    "mcp",
    "conversation",
    "history",
    "search",
    "cache",
    "sqlite",
    "redis"
  ]
}
